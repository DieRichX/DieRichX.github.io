<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Telegram Login - –†–µ–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background: #0088cc;
    }
    .container {
      background: white;
      padding: 40px;
      border-radius: 12px;
      text-align: center;
      max-width: 380px;
      width: 90%;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 24px;
    }
    .subtitle {
      color: #666;
      margin-bottom: 30px;
    }
    .widget-container {
      margin: 25px 0;
      min-height: 50px;
    }
    .status {
      padding: 12px;
      border-radius: 8px;
      margin: 15px 0;
      font-size: 14px;
    }
    .loading {
      background: #e3f2fd;
      color: #1565c0;
    }
    .error {
      background: #ffebee;
      color: #c62828;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>–í—Ö–æ–¥ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</h1>
    <div class="subtitle">–ß–µ—Ä–µ–∑ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç Telegram</div>
    
    <div class="widget-container">
      <!-- –ó–ê–ú–ï–ù–ò–¢–ï Messenger_Tests_bot –Ω–∞ –¢–û–ß–ù–´–ô username –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ -->
      <script async 
        src="https://telegram.org/js/telegram-widget.js?22" 
        data-telegram-login="YourMessengerAuthBot"
        data-size="large" 
        data-userpic="false"
        data-onauth="onTelegramAuth">
      </script>
    </div>

    <div class="status loading" id="status">
      –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã –≤—Ö–æ–¥–∞...
    </div>

    <button onclick="closeWindow()" style="
      background: #f5f5f5;
      border: 1px solid #ddd;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
    ">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>

  <script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Telegram
    function onTelegramAuth(user) {
      console.log('üîê –†–ï–ê–õ–¨–ù–´–ô –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram:', user);
      document.getElementById('status').textContent = '‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!';
      
      // –ü–µ—Ä–µ–¥–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Electron –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
      if (window.teleAuth && typeof window.teleAuth.send === 'function') {
        window.teleAuth.send(user);
      } else {
        // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
        alert('–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω: ' + user.first_name + ' (@' + (user.username || 'no_username') + ')');
      }
    }

    function closeWindow() {
      if (window.teleAuth && typeof window.teleAuth.cancel === 'function') {
        window.teleAuth.cancel();
      } else {
        window.close();
      }
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É –≤–∏–¥–∂–µ—Ç–∞
    setTimeout(() => {
      const widget = document.querySelector('.tgme_widget_login');
      if (widget && widget.offsetParent !== null) {
        document.getElementById('status').textContent = '‚úÖ –ì–æ—Ç–æ–≤–æ! –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ –¥–ª—è –≤—Ö–æ–¥–∞';
      } else {
        document.getElementById('status').className = 'status error';
        document.getElementById('status').innerHTML = `
          ‚ùå –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å<br><br>
          <strong>–†–µ—à–µ–Ω–∏–µ:</strong><br>
          1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ @BotFather –¥–ª—è –±–æ—Ç–∞ <strong>Messenger_Tests_bot</strong><br>
          2. –£–∫–∞–∑–∞–Ω –¥–æ–º–µ–Ω: <strong>dierichx.github.io</strong><br>
          3. –ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω –∏ –Ω–µ –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
        `;
      }
    }, 3000);
  </script>
</body>
</html>
